{
  "hash": "6918a40f49c746322e7eb6c38d0acfa4",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Assignment 5: Government Data API\"\nformat: html\neditor: visual\n---\n## 1. Scraping Government Documents\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(purrr); library(magrittr); library(jsonlite); library(data.table); library(readr); library(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'magrittr'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:purrr':\n\n    set_names\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'jsonlite'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:purrr':\n\n    flatten\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'data.table'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:purrr':\n\n    transpose\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'dplyr'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:data.table':\n\n    between, first, last\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n\n\n:::\n\n```{.r .cell-code}\nsetwd(\"/Users/adilenegaribay/Dropbox/Quarto/adilenegaribay.github.io\")\n# Load metadata\ngovfiles<-read.csv(\"https://github.com/datageneration/datamethods/raw/refs/heads/master/webdata/govinfo-search-results-2024-10-13T07_10_42.csv\", skip=2)\ngf_list1<-jsonlite::read_json(\"https://github.com/datageneration/datamethods/raw/refs/heads/master/webdata/govinfo-search-results-2024-10-13T07_18_29.json\")\ngovfile2=dplyr::bind_rows(gf_list1$resultSet)\ngovfiles3 <- gf_list1$resultSet\ngovfiles3 <- dplyr::bind_rows(gf_list1$resultSet)\ngovfiles$id = govfiles$packageId\npdf_govfiles_url = govfiles3$pdfLink\npdf_govfiles_id <- govfiles3$index\nsave_dir<-\"/Users/adilenegaribay/Dropbox/Quarto/adilenegaribay.github.io/pdfs\"\ndownload_govfiles_pdf <- function(url, id) {\n  tryCatch({\n    destfile <- paste0(save_dir, \"govfiles_\", id, \".pdf\")\n    download.file(url, destfile = destfile, mode = \"wb\")\n    Sys.sleep(runif(1, 1, 3))\n    paste(\"Downloaded:\", url)\n  }, error = function(e) paste(\"Failed:\", url))\n}\nresults <- 1:10 %>% purrr::map_chr(~ download_govfiles_pdf(pdf_govfiles_url[.], pdf_govfiles_id[.]))\nprint(results)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"Downloaded: https://www.govinfo.gov/content/pkg/BILLS-118sres890is/pdf/BILLS-118sres890is.pdf\"        \n [2] \"Downloaded: https://www.govinfo.gov/content/pkg/BILLS-118sjres114is/pdf/BILLS-118sjres114is.pdf\"      \n [3] \"Downloaded: https://www.govinfo.gov/content/pkg/BILLS-118sres805ats/pdf/BILLS-118sres805ats.pdf\"      \n [4] \"Downloaded: https://www.govinfo.gov/content/pkg/BILLS-118sjres115is/pdf/BILLS-118sjres115is.pdf\"      \n [5] \"Downloaded: https://www.govinfo.gov/content/pkg/BILLS-118sjres113is/pdf/BILLS-118sjres113is.pdf\"      \n [6] \"Downloaded: https://www.govinfo.gov/content/pkg/BILLS-118sjres111is/pdf/BILLS-118sjres111is.pdf\"      \n [7] \"Downloaded: https://www.govinfo.gov/content/pkg/BILLS-118sjres112is/pdf/BILLS-118sjres112is.pdf\"      \n [8] \"Downloaded: https://www.govinfo.gov/content/pkg/CREC-2024-09-25/pdf/CREC-2024-09-25-pt1-PgD951.pdf\"   \n [9] \"Downloaded: https://www.govinfo.gov/content/pkg/CREC-2024-09-25/pdf/CREC-2024-09-25-pt1-PgS6417-2.pdf\"\n[10] \"Downloaded: https://www.govinfo.gov/content/pkg/CREC-2024-09-25/pdf/CREC-2024-09-25-pt1-PgS6418.pdf\"  \n```\n\n\n:::\n\n```{.r .cell-code}\n## 118th Congressional HEarings\nurls <- c(\n  \"https://www.govinfo.gov/content/pkg/CHRG-118hhrg51256/pdf/CHRG-118hhrg51256.pdf\",\n  \"https://www.govinfo.gov/content/pkg/CRPT-118hrpt708/pdf/CRPT-118hrpt708.pdf\"\n)\n\nids <- c(\"CHRG-118hhrg51256\", \"CRPT-118hrpt708\")\n\nwalk2(urls, ids, ~ download.file(.x, paste0(.y, \".pdf\"), mode = \"wb\"))\n```\n:::\n\n## 2. \n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}